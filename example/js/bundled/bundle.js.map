{"version":3,"sources":["node_modules/browser-pack/_prelude.js","assets/dist/js/app/preBabel/common/dcf-lazyLoad.js","assets/dist/js/app/preBabel/common/dcf-modal.js","example/js/src/main-body.js"],"names":[],"mappings":"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","file":"bundle.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()",";(function(root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define([], factory);\n  } else if (typeof exports === 'object') {\n    module.exports = factory();\n  } else {\n    root.dcfLazyLoad = factory();\n  }\n}(this, function() {\nclass LazyLoad {\n  /**\n   * class constructor\n   * @param {imagesList} nodelist of selected images\n   * @param {observerConfig} object of intersectionObserver configuration\n   * @param {classNames} array of classes applied\n   */\n  constructor(imagesList, observerConfig, classNames) {\n    this.imagesList = imagesList;\n    this.observerConfig = observerConfig;\n    this.classNames = classNames; // add onEnter, onEnterActive?\n  }\n\n  pxTOvw(value) {\n    var w = window,\n      d = document,\n      e = d.documentElement,\n      g = d.getElementsByTagName('body')[0],\n      x = w.innerWidth || e.clientWidth || g.clientWidth;\n\n    var result = (100*value)/x;\n    return result + 'vw';\n  };\n\n  /**\n   * Apply the image: preloaded image is loaded but not applied to actual image element\n   * @param {string} image: the image element that we are targetting\n   */\n  applyImage(image) {\n    const src = image.dataset.src;\n    const srcset = image.dataset.srcset || null;\n    const sizes = image.dataset.sizes || this.pxTOvw(image.parentElement.clientWidth);\n\n    if (!src) {\n      return;\n      //throw new Error('No image src attribute provided');\n    }\n\n    // Prevent this from being lazy loaded a second time.\n    image.classList.add('dcf-lazy-loaded');\n    src && (image.src = src);\n    src && (image.removeAttribute('data-src'));\n    srcset && (image.srcset = srcset);\n    srcset && (image.removeAttribute('data-srcset'));\n    sizes && (image.sizes = sizes);\n    sizes && (image.removeAttribute('data-sizes'));\n    this.classNames.length && this.classNames.forEach(className => image.classList.add(className));\n  };\n\n  /**\n   * Fetches the image for the given source\n   * @param {string} src\n   * @param {string} srcset, defaults to null if not provided\n   */\n  fetchImage(src, srcset = null, sizes = null) {\n    return new Promise((resolve, reject) => {\n      const image = new Image();\n      src && (image.src = src);\n      srcset && (image.srcset = srcset);\n      sizes && (image.sizes = sizes);\n\n      image.onload = resolve;\n      image.onerror = reject;\n    });\n  }\n\n  /**\n   * Preloads the image\n   * @param {object} image\n   */\n  preloadImage(image) {\n    const src = image.dataset.src;\n    const srcset = image.dataset.srcset;\n    const sizes = image.dataset.sizes || null;\n\n    if (!src) {\n      return;\n      //throw new Error('No image src attribute provided');\n    }\n\n    return this.fetchImage(src, srcset, sizes).catch(err => `Image failed to fetch ${err.mes}`);\n  };\n\n  /**\n   * Load all of the images immediately\n   * @param {NodeListOf<Element>} preload\n   * @param {boolean} images\n   */\n  loadImagesImmediately(images, preload = true) {\n    // foreach() is not supported in IE\n    for (let i = 0; i < images.length; i++) {\n      let image = images[i];\n      if (preload === true) {\n        this.preloadImage(image);\n      }\n      this.applyImage(image);\n    }\n  }\n\n  /**\n   * Disconnect the observer\n   */\n  disconnect() {\n    if (!this.observer) {\n      return;\n    }\n\n    this.observer.disconnect();\n  };\n\n  /**\n   * On intersection\n   * @param {array} intersection entries\n   * @param {object} intersection observer\n   */\n  onIntersection = (entries, observer) => {\n\n    // Disconnect if we've already loaded all of the images\n    if (this.imageCount === 0) {\n      this.observer.disconnect();\n    }\n\n    // Loop through the entries\n    for (let i = 0; i < entries.length; i++) {\n      let entry = entries[i];\n\n      // Are we in viewport?\n      // console.log(entry.intersectionRatio);\n\n      if (entry.intersectionRatio > observer.thresholds[0] && entry.intersectionRatio < observer.thresholds[1]) {\n        this.preloadImage(entry.target);\n      } else if (entry.intersectionRatio > observer.thresholds[1]) {\n        this.imageCount--;\n        this.applyImage(entry.target);\n        this.observer.unobserve(entry.target);\n      }\n    }\n  };\n\n\n  initialize() {\n    if(!this.imagesList) return;\n\n    // counter: keeps track of which images that hasn't been loaded\n    this.imageCount = this.imagesList.length;\n\n    if (\"loading\" in HTMLImageElement.prototype) {\n      // Native lazy loading IS supported, so set src-data to src\n      this.loadImagesImmediately(this.imagesList, false);\n    } else {\n      // Native lazy loading NOT supported, so handle via javascript\n      // If browser doesn't support intersection observer, load the images immediately\n      if (!('IntersectionObserver' in window)) {\n        this.loadImagesImmediately(this.imagesList);\n      } else {\n        // It is supported, load the images\n        this.observer = new IntersectionObserver(this.onIntersection, this.observerConfig);\n\n        // foreach() is not supported in IE\n        for (let i = 0; i < this.imageCount; i++) {\n          let image = this.imagesList[i];\n          if (image.classList.contains('dcf-lazy-loaded')) {\n            continue;\n          }\n\n          this.observer.observe(image);\n        }\n      }\n    }\n  }\n}\n\nreturn LazyLoad;\n}));\n",";(function(root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define([], factory);\n  } else if (typeof exports === 'object') {\n    module.exports = factory();\n  } else {\n    root.dcfModal = factory();\n  }\n}(this, function() {\nclass Modal {\n\n  /**\n   * class constructor\n   * @param {modals} modals of selected modals\n   */\n  constructor(modals) {\n//     this.thebody = body;\n    this.modals = modals;\n  }\n\n\n\n  /**\n   * Prepend modals to body so that elements outside of modal can be made inert\n   * @param {string} el: the element that we are targetting\n   */\n  prependBody(el) {\n    const body = document.querySelector('body');\n    const firstChild = body.firstElementChild;\n    body.insertBefore(el, firstChild);\n  }\n\n  // Transition modal on close\n//   modalTransition(event, modal) {\n//     const thisModal = this;\n//\n//     // Remove the event listener after the modal transition has completed\n//     thisModal.removeEventListener('transitionend', modalTransition);\n//\n//     // Add the `.dcf-invisible` class to this modal after the transition\n//     if (!thisModal.classList.contains('dcf-invisible')) {\n//       thisModal.classList.add('dcf-invisible');\n//     }\n//   }\n\n  // Open modal\n  openModal(modalId, openBtnId) {\n\n    const body = document.querySelector('body');\n\n    for (let i = 0; i < this.modals.length; i++) {\n      const modal = this.modals[i];\n\n      if (modal.getAttribute('id') !== modalId) {\n        this.closeModal(modal.getAttribute('id'));\n      }\n\n    }\n\n    const thisModal = document.getElementById(modalId);\n    let modalOpen = thisModal.getAttribute('aria-hidden') === 'false' ? true : false;\n\n    if (openBtnId) {\n      currentBtn = openBtnId;\n    }\n\n    currentModal = modalId;\n\n    // Don't open modal if it's already open\n    if (modalOpen) {\n      return;\n    }\n\n    // Set elements outside of modal to be inert and hidden from screen readers\n    nonModals.forEach(function(el, array) {\n      el.setAttribute('aria-hidden','true');\n      el.setAttribute('inert','');\n      // TODO: Configure inert polyfill\n    });\n\n//   \tPrevent body from scrolling\n//   \tdisableBodyScroll(thisModal);\n\n    // Add `.dcf-modal-is-open` helper class to body\n    body.classList.add('dcf-modal-is-open');\n\n    // Set attribute for this modal\n    thisModal.setAttribute('aria-hidden', 'false');\n\n    // Add/remove classes to this modal\n    thisModal.classList.remove('dcf-opacity-0', 'dcf-pointer-events-none', 'dcf-invisible');\n    thisModal.classList.add('dcf-opacity-100', 'dcf-pointer-events-auto');\n\n    // Send focus to modal content\n    thisModal.focus();\n\n    // TODO: Trap focus inside the modal content\n\n  }\n\n\n  // Close modal\n  closeModal(modalId) {\n\n    const body = document.querySelector('body');\n    const thisModal = document.getElementById(modalId);\n\n    let modalClosed = thisModal.getAttribute('aria-hidden') === 'true' ? true : false;\n\n    currentModal = null;\n\n    // Don't close modal if it's already closed\n    if (modalClosed) {\n      return;\n    }\n\n    // Remove `.dcf-modal-is-open` helper class from body\n  \tbody.classList.remove('dcf-modal-is-open');\n\n    // Restore visibility andd functionality to elements outside of modal\n    nonModals.forEach(function(el, array) {\n      el.setAttribute('aria-hidden','false');\n      el.removeAttribute('inert');\n    });\n\n    // Set attribute for this modal\n    thisModal.setAttribute('aria-hidden', 'true');\n\n    // Add/remove classes to this modal\n    thisModal.classList.remove('dcf-opacity-100', 'dcf-pointer-events-auto');\n    thisModal.classList.add('dcf-opacity-0', 'dcf-pointer-events-none');\n\n    // Add event listener for the end of the modal transition\n//     thisModal.addEventListener('transitionend', modalTransition);\n\n    // Send focus back to button that opened modal\n    if (currentBtn) {\n      document.getElementById(currentBtn).focus();\n    }\n\n      // TODO: Allow body to scroll\n  }\n\n\n  btnOpenListen(btnOpenModal, modalId, btnId) {\n\n    // TODO: account for multiple buttons able to open a single modal (e.g., search)\n    // Listen for when 'open modal' button is pressed\n    btnOpenModal.addEventListener('click', function () {\n      // Open modal when button is pressed\n      this.openModal(modalId, btnId);\n    }, false);\n\n  }\n\n  btnCloseListen(btnCloseModal, modal) {\n\n    // Listen for when 'close modal' button is pressed\n    btnCloseModal.addEventListener('click', function () {\n      // Open modal when button is pressed\n      this.closeModal(modal.getAttribute('id'));\n    }, false);\n\n  }\n\n  overlayListen(modal, modalContent) {\n\n    // Listen for clicks on the open modal\n    modal.addEventListener('click', function (event) {\n\n      // If the click is in modal content, leave the modal open\n      if (modalContent.contains(event.target)) {\n        return;\n      }\n\n      // If the click is outside the modal content (on the modal overlay), close the modal\n      this.closeModal(modal.getAttribute('id'));\n    });\n\n  }\n\n  // Listen for when 'esc' key is pressed\n//   document.addEventListener('keydown', function (event) {\n//\n//     // Close the currently open modal when 'esc' key is pressed\n//     if (event.which === 27 && currentModal) {\n//       event.preventDefault();\n//       closeModal(currentModal);\n//     }\n//   }, false);\n\n\n  initialize() {\n\n    if(!this.modals) {\n      return;\n    }\n\n    // Define constants used in modal component\n    const body = document.querySelector('body');\n    const btnsOpenModal = document.querySelectorAll('.dcf-btn-open-modal');\n    const btnsCloseModal = document.querySelectorAll('.dcf-btn-close-modal');\n    const modalsContent = document.querySelectorAll('.dcf-modal-content');\n    const skipNav = document.getElementById('dcf-skip-nav');\n    const header = document.getElementById('dcf-header');\n    const main = document.getElementById('dcf-main');\n    const footer = document.getElementById('dcf-footer');\n    const nonModals = [skipNav, header, main, footer];\n\n    let currentBtn = null;\n    let currentModal = null;\n\n    // Loop through all buttons that open modals\n    for (let i = 0; i < btnsOpenModal.length; i++) {\n      const btnOpenModal = btnsOpenModal[i];\n      const modalId = btnOpenModal.getAttribute('data-opens-modal');\n      const btnId = 'dcf-btn-opens-' + modalId;\n      btnOpenModal.setAttribute('id', btnId);\n\n      // Buttons are disabled by default until JavaScript has loaded.\n      // Remove the 'disabled' attribute to make them functional.\n      btnOpenModal.removeAttribute('disabled');\n\n      this.btnOpenListen(btnOpenModal, modalId, btnId);\n    }\n\n\n    // Loop through all modals\n    for (let i = 0; i < this.modals.length; i++) {\n      const modal = this.modals[i];\n      const modalContent = modalsContent[i];\n      const btnCloseModal = btnsCloseModal[i];\n      const modalId = modal.id;\n      const modalHeadingId = modalId + '-heading';\n\n      // Get all headings in each modal\n      const modalHeadings = modalContent.querySelectorAll('h1, h2, h3, h4, h5, h6');\n\n      // Set ID on the first heading of each modal\n      modalHeadings[0].id = modalHeadingId;\n\n      // Prepend modals to body so that elements outside of modal can be made inert when modal is open\n      this.prependBody(modal);\n\n      // Modals are hidden by default until JavaScript has loaded.\n      // Remove `hidden` attribute, then later replace with `.dcf-invisible` to allow for modal transitions.\n      modal.removeAttribute('hidden');\n\n      // Set attributes for each modal\n      modal.setAttribute('aria-labelledby', modalHeadingId);\n      modal.setAttribute('aria-hidden', 'true');\n      modal.setAttribute('role', 'dialog');\n      modal.setAttribute('tabindex', '-1');\n\n      // Add classes to each modal\n      modal.classList.add('dcf-fixed', 'dcf-pin-top', 'dcf-pin-left', 'dcf-h-100%', 'dcf-w-100%', 'dcf-d-flex', 'dcf-ai-center', 'dcf-jc-center', 'dcf-invisible');\n\n      // Set attribute for modal content\n      modalContent.setAttribute('role', 'document');\n\n      // Add classes to modal content\n      // TODO: add these classes only if no custom classes are present in the markup\n      modalContent.classList.add('dcf-relative', 'dcf-wrapper', 'dcf-pt-7', 'dcf-pb-7');\n\n      // Add classes and attributes to each 'close' button\n      // TODO: add these classes only if no custom classes are present in the markup\n      btnCloseModal.classList.add('dcf-absolute', 'dcf-pin-top', 'dcf-pin-right', 'dcf-z-1');\n\n      // Set attributes for each 'close' button\n      btnCloseModal.setAttribute('type', 'button');\n      btnCloseModal.setAttribute('aria-label', 'Close');\n\n      this.overlayListen(modal, modalContent);\n\n      this.btnCloseListen(btnCloseModal, modal);\n\n    }\n\n  }\n\n}\n\nreturn Modal;\n}));\n","let LazyLoad = require('dcf-lazyLoad');\nlet Modal = require('dcf-modal');\n// let Notice = require('dcf-notice');\n\n// let flatpickr = require('flatpickr/flatpickr');\n// require(\"flatpickr/flatpickr.css\");\n\n\n// const noticeOptions = {\n// \twidget: 'notice',\n// \t'notice-type': 'alert',\n// \tanimation: 'true',\n// \tlocation: 'fixedBottom',\n// \tcollapsible: 'true',\n// \tid: 'dynamicNotice1'\n// };\n//\n// Notice.create('Spaghetti Monster Lives', 'You know no spaghetti', noticeOptions);\n\n\n// let datepicker = document.querySelector('[data-widget*=\"flatpickr\"]');\n// flatpickr(datepicker, {\n// \tenableTime: true,\n// \tdateFormat: \"Y-m-d h:iK\",\n// });\n\nconst images = document.querySelectorAll('[loading=lazy], .dcf-lazy-load');\nconst observerConfig = {\n\t// extend intersection root margin by 50px to start intersection earlier by 50px\n\trootMargin: '0px 0px 50px 0px',\n\tthreshold: [0, 0.40]\n};\nconst enterClassNames = ['dcf-fade-in'];\nconst exampleLazyLoad = new LazyLoad(images, observerConfig, enterClassNames);\nexampleLazyLoad.initialize();\n\nconst modals = document.querySelectorAll('.dcf-modal');\nconst exampleModal = new Modal(modals);\nexampleModal.initialize();\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJhc3NldHMvZGlzdC9qcy9hcHAvcHJlQmFiZWwvY29tbW9uL2RjZi1sYXp5TG9hZC5qcyIsImFzc2V0cy9kaXN0L2pzL2FwcC9wcmVCYWJlbC9jb21tb24vZGNmLW1vZGFsLmpzIiwiZXhhbXBsZS9qcy9zcmMvbWFpbi1ib2R5LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7QUNBQSxDQUFFLFdBQVMsSUFBVCxFQUFlLE9BQWYsRUFBd0I7QUFDeEIsTUFBSSxPQUFPLE1BQVAsS0FBa0IsVUFBbEIsSUFBZ0MsT0FBTyxHQUEzQyxFQUFnRDtBQUM5QyxXQUFPLEVBQVAsRUFBVyxPQUFYO0FBQ0QsR0FGRCxNQUVPLElBQUksUUFBTyxPQUFQLHlDQUFPLE9BQVAsT0FBbUIsUUFBdkIsRUFBaUM7QUFDdEMsV0FBTyxPQUFQLEdBQWlCLFNBQWpCO0FBQ0QsR0FGTSxNQUVBO0FBQ0wsU0FBSyxXQUFMLEdBQW1CLFNBQW5CO0FBQ0Q7QUFDRixDQVJDLGFBUU0sWUFBVztBQUFBLE1BQ2IsUUFEYTtBQUVqQjs7Ozs7O0FBTUEsc0JBQVksVUFBWixFQUF3QixjQUF4QixFQUF3QyxVQUF4QyxFQUFvRDtBQUFBOztBQUFBOztBQUFBLFdBNEdwRCxjQTVHb0QsR0E0R25DLFVBQUMsT0FBRCxFQUFVLFFBQVYsRUFBdUI7O0FBRXRDO0FBQ0EsWUFBSSxNQUFLLFVBQUwsS0FBb0IsQ0FBeEIsRUFBMkI7QUFDekIsZ0JBQUssUUFBTCxDQUFjLFVBQWQ7QUFDRDs7QUFFRDtBQUNBLGFBQUssSUFBSSxJQUFJLENBQWIsRUFBZ0IsSUFBSSxRQUFRLE1BQTVCLEVBQW9DLEdBQXBDLEVBQXlDO0FBQ3ZDLGNBQUksUUFBUSxRQUFRLENBQVIsQ0FBWjs7QUFFQTtBQUNBOztBQUVBLGNBQUksTUFBTSxpQkFBTixHQUEwQixTQUFTLFVBQVQsQ0FBb0IsQ0FBcEIsQ0FBMUIsSUFBb0QsTUFBTSxp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QSxJQUFNLFNBQVMsU0FBUyxnQkFBVCxDQUEwQixnQ0FBMUIsQ0FBZjtBQUNBLElBQU0saUJBQWlCO0FBQ3RCO0FBQ0EsYUFBWSxrQkFGVTtBQUd0QixZQUFXLENBQUMsQ0FBRCxFQUFJLElBQUo7QUFIVyxDQUF2QjtBQUtBLElBQU0sa0JBQWtCLENBQUMsYUFBRCxDQUF4QjtBQUNBLElBQU0sa0JBQWtCLElBQUksUUFBSixDQUFhLE1BQWIsRUFBcUIsY0FBckIsRUFBcUMsZUFBckMsQ0FBeEI7QUFDQSxnQkFBZ0IsVUFBaEI7O0FBRUEsSUFBTSxTQUFTLFNBQVMsZ0JBQVQsQ0FBMEIsWUFBMUIsQ0FBZjtBQUNBLElBQU0sZUFBZSxJQUFJLEtBQUosQ0FBVSxNQUFWLENBQXJCO0FBQ0EsYUFBYSxVQUFiIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiOyhmdW5jdGlvbihyb290LCBmYWN0b3J5KSB7XG4gIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICBkZWZpbmUoW10sIGZhY3RvcnkpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jykge1xuICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuICB9IGVsc2Uge1xuICAgIHJvb3QuZGNmTGF6eUxvYWQgPSBmYWN0b3J5KCk7XG4gIH1cbn0odGhpcywgZnVuY3Rpb24oKSB7XG5jbGFzcyBMYXp5TG9hZCB7XG4gIC8qKlxuICAgKiBjbGFzcyBjb25zdHJ1Y3RvclxuICAgKiBAcGFyYW0ge2ltYWdlc0xpc3R9IG5vZGVsaXN0IG9mIHNlbGVjdGVkIGltYWdlc1xuICAgKiBAcGFyYW0ge29ic2VydmVyQ29uZmlnfSBvYmplY3Qgb2YgaW50ZXJzZWN0aW9uT2JzZXJ2ZXIgY29uZmlndXJhdGlvblxuICAgKiBAcGFyYW0ge2NsYXNzTmFtZXN9IGFycmF5IG9mIGNsYXNzZXMgYXBwbGllZFxuICAgKi9cbiAgY29uc3RydWN0b3IoaW1hZ2VzTGlzdCwgb2JzZXJ2ZXJDb25maWcsIGNsYXNzTmFtZXMpIHtcbiAgICB0aGlzLmltYWdlc0xpc3QgPSBpbWFnZXNMaXN0O1xuICAgIHRoaXMub2JzZXJ2ZXJDb25maWcgPSBvYnNlcnZlckNvbmZpZztcbiAgICB0aGlzLmNsYXNzTmFtZXMgPSBjbGFzc05hbWVzOyAvLyBhZGQgb25FbnRlciwgb25FbnRlckFjdGl2ZT9cbiAgfVxuXG4gIHB4VE92dyh2YWx1ZSkge1xuICAgIHZhciB3ID0gd2luZG93LFxuICAgICAgZCA9IGRvY3VtZW50LFxuICAgICAgZSA9IGQuZG9jdW1lbnRFbGVtZW50LFxuICAgICAgZyA9IGQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2JvZHknKVswXSxcbiAgICAgIHggPSB3LmlubmVyV2lkdGggfHwgZS5jbGllbnRXaWR0aCB8fCBnLmNsaWVudFdpZHRoO1xuXG4gICAgdmFyIHJlc3VsdCA9ICgxMDAqdmFsdWUpL3g7XG4gICAgcmV0dXJuIHJlc3VsdCArICd2dyc7XG4gIH07XG5cbiAgLyoqXG4gICAqIEFwcGx5IHRoZSBpbWFnZTogcHJlbG9hZGVkIGltYWdlIGlzIGxvYWRlZCBidXQgbm90IGFwcGxpZWQgdG8gYWN0dWFsIGltYWdlIGVsZW1lbnRcbiAgICogQHBhcmFtIHtzdHJpbmd9IGltYWdlOiB0aGUgaW1hZ2UgZWxlbWVudCB0aGF0IHdlIGFyZSB0YXJnZXR0aW5nXG4gICAqL1xuICBhcHBseUltYWdlKGltYWdlKSB7XG4gICAgY29uc3Qgc3JjID0gaW1hZ2UuZGF0YXNldC5zcmM7XG4gICAgY29uc3Qgc3Jjc2V0ID0gaW1hZ2UuZGF0YXNldC5zcmNzZXQgfHwgbnVsbDtcbiAgICBjb25zdCBzaXplcyA9IGltYWdlLmRhdGFzZXQuc2l6ZXMgfHwgdGhpcy5weFRPdncoaW1hZ2UucGFyZW50RWxlbWVudC5jbGllbnRXaWR0aCk7XG5cbiAgICBpZiAoIXNyYykge1xuICAgICAgcmV0dXJuO1xuICAgICAgLy90aHJvdyBuZXcgRXJyb3IoJ05vIGltYWdlIHNyYyBhdHRyaWJ1dGUgcHJvdmlkZWQnKTtcbiAgICB9XG5cbiAgICAvLyBQcmV2ZW50IHRoaXMgZnJvbSBiZWluZyBsYXp5IGxvYWRlZCBhIHNlY29uZCB0aW1lLlxuICAgIGltYWdlLmNsYXNzTGlzdC5hZGQoJ2RjZi1sYXp5LWxvYWRlZCcpO1xuICAgIHNyYyAmJiAoaW1hZ2Uuc3JjID0gc3JjKTtcbiAgICBzcmMgJiYgKGltYWdlLnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1zcmMnKSk7XG4gICAgc3Jjc2V0ICYmIChpbWFnZS5zcmNzZXQgPSBzcmNzZXQpO1xuICAgIHNyY3NldCAmJiAoaW1hZ2UucmVtb3ZlQXR0cmlidXRlKCdkYXRhLXNyY3NldCcpKTtcbiAgICBzaXplcyAmJiAoaW1hZ2Uuc2l6ZXMgPSBzaXplcyk7XG4gICAgc2l6ZXMgJiYgKGltYWdlLnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1zaXplcycpKTtcbiAgICB0aGlzLmNsYXNzTmFtZXMubGVuZ3RoICYmIHRoaXMuY2xhc3NOYW1lcy5mb3JFYWNoKGNsYXNzTmFtZSA9PiBpbWFnZS5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSkpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBGZXRjaGVzIHRoZSBpbWFnZSBmb3IgdGhlIGdpdmVuIHNvdXJjZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gc3JjXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzcmNzZXQsIGRlZmF1bHRzIHRvIG51bGwgaWYgbm90IHByb3ZpZGVkXG4gICAqL1xuICBmZXRjaEltYWdlKHNyYywgc3Jjc2V0ID0gbnVsbCwgc2l6ZXMgPSBudWxsKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGNvbnN0IGltYWdlID0gbmV3IEltYWdlKCk7XG4gICAgICBzcmMgJiYgKGltYWdlLnNyYyA9IHNyYyk7XG4gICAgICBzcmNzZXQgJiYgKGltYWdlLnNyY3NldCA9IHNyY3NldCk7XG4gICAgICBzaXplcyAmJiAoaW1hZ2Uuc2l6ZXMgPSBzaXplcyk7XG5cbiAgICAgIGltYWdlLm9ubG9hZCA9IHJlc29sdmU7XG4gICAgICBpbWFnZS5vbmVycm9yID0gcmVqZWN0O1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFByZWxvYWRzIHRoZSBpbWFnZVxuICAgKiBAcGFyYW0ge29iamVjdH0gaW1hZ2VcbiAgICovXG4gIHByZWxvYWRJbWFnZShpbWFnZSkge1xuICAgIGNvbnN0IHNyYyA9IGltYWdlLmRhdGFzZXQuc3JjO1xuICAgIGNvbnN0IHNyY3NldCA9IGltYWdlLmRhdGFzZXQuc3Jjc2V0O1xuICAgIGNvbnN0IHNpemVzID0gaW1hZ2UuZGF0YXNldC5zaXplcyB8fCBudWxsO1xuXG4gICAgaWYgKCFzcmMpIHtcbiAgICAgIHJldHVybjtcbiAgICAgIC8vdGhyb3cgbmV3IEVycm9yKCdObyBpbWFnZSBzcmMgYXR0cmlidXRlIHByb3ZpZGVkJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuZmV0Y2hJbWFnZShzcmMsIHNyY3NldCwgc2l6ZXMpLmNhdGNoKGVyciA9PiBgSW1hZ2UgZmFpbGVkIHRvIGZldGNoICR7ZXJyLm1lc31gKTtcbiAgfTtcblxuICAvKipcbiAgICogTG9hZCBhbGwgb2YgdGhlIGltYWdlcyBpbW1lZGlhdGVseVxuICAgKiBAcGFyYW0ge05vZGVMaXN0T2Y8RWxlbWVudD59IHByZWxvYWRcbiAgICogQHBhcmFtIHtib29sZWFufSBpbWFnZXNcbiAgICovXG4gIGxvYWRJbWFnZXNJbW1lZGlhdGVseShpbWFnZXMsIHByZWxvYWQgPSB0cnVlKSB7XG4gICAgLy8gZm9yZWFjaCgpIGlzIG5vdCBzdXBwb3J0ZWQgaW4gSUVcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGltYWdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgbGV0IGltYWdlID0gaW1hZ2VzW2ldO1xuICAgICAgaWYgKHByZWxvYWQgPT09IHRydWUpIHtcbiAgICAgICAgdGhpcy5wcmVsb2FkSW1hZ2UoaW1hZ2UpO1xuICAgICAgfVxuICAgICAgdGhpcy5hcHBseUltYWdlKGltYWdlKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRGlzY29ubmVjdCB0aGUgb2JzZXJ2ZXJcbiAgICovXG4gIGRpc2Nvbm5lY3QoKSB7XG4gICAgaWYgKCF0aGlzLm9ic2VydmVyKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5vYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIE9uIGludGVyc2VjdGlvblxuICAgKiBAcGFyYW0ge2FycmF5fSBpbnRlcnNlY3Rpb24gZW50cmllc1xuICAgKiBAcGFyYW0ge29iamVjdH0gaW50ZXJzZWN0aW9uIG9ic2VydmVyXG4gICAqL1xuICBvbkludGVyc2VjdGlvbiA9IChlbnRyaWVzLCBvYnNlcnZlcikgPT4ge1xuXG4gICAgLy8gRGlzY29ubmVjdCBpZiB3ZSd2ZSBhbHJlYWR5IGxvYWRlZCBhbGwgb2YgdGhlIGltYWdlc1xuICAgIGlmICh0aGlzLmltYWdlQ291bnQgPT09IDApIHtcbiAgICAgIHRoaXMub2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICAgIH1cblxuICAgIC8vIExvb3AgdGhyb3VnaCB0aGUgZW50cmllc1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZW50cmllcy5sZW5ndGg7IGkrKykge1xuICAgICAgbGV0IGVudHJ5ID0gZW50cmllc1tpXTtcblxuICAgICAgLy8gQXJlIHdlIGluIHZpZXdwb3J0P1xuICAgICAgLy8gY29uc29sZS5sb2coZW50cnkuaW50ZXJzZWN0aW9uUmF0aW8pO1xuXG4gICAgICBpZiAoZW50cnkuaW50ZXJzZWN0aW9uUmF0aW8gPiBvYnNlcnZlci50aHJlc2hvbGRzWzBdICYmIGVudHJ5LmludGVyc2VjdGlvblJhdGlvIDwgb2JzZXJ2ZXIudGhyZXNob2xkc1sxXSkge1xuICAgICAgICB0aGlzLnByZWxvYWRJbWFnZShlbnRyeS50YXJnZXQpO1xuICAgICAgfSBlbHNlIGlmIChlbnRyeS5pbnRlcnNlY3Rpb25SYXRpbyA+IG9ic2VydmVyLnRocmVzaG9sZHNbMV0pIHtcbiAgICAgICAgdGhpcy5pbWFnZUNvdW50LS07XG4gICAgICAgIHRoaXMuYXBwbHlJbWFnZShlbnRyeS50YXJnZXQpO1xuICAgICAgICB0aGlzLm9ic2VydmVyLnVub2JzZXJ2ZShlbnRyeS50YXJnZXQpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuXG4gIGluaXRpYWxpemUoKSB7XG4gICAgaWYoIXRoaXMuaW1hZ2VzTGlzdCkgcmV0dXJuO1xuXG4gICAgLy8gY291bnRlcjoga2VlcHMgdHJhY2sgb2Ygd2hpY2ggaW1hZ2VzIHRoYXQgaGFzbid0IGJlZW4gbG9hZGVkXG4gICAgdGhpcy5pbWFnZUNvdW50ID0gdGhpcy5pbWFnZXNMaXN0Lmxlbmd0aDtcblxuICAgIGlmIChcImxvYWRpbmdcIiBpbiBIVE1MSW1hZ2VFbGVtZW50LnByb3RvdHlwZSkge1xuICAgICAgLy8gTmF0aXZlIGxhenkgbG9hZGluZyBJUyBzdXBwb3J0ZWQsIHNvIHNldCBzcmMtZGF0YSB0byBzcmNcbiAgICAgIHRoaXMubG9hZEltYWdlc0ltbWVkaWF0ZWx5KHRoaXMuaW1hZ2VzTGlzdCwgZmFsc2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBOYXRpdmUgbGF6eSBsb2FkaW5nIE5PVCBzdXBwb3J0ZWQsIHNvIGhhbmRsZSB2aWEgamF2YXNjcmlwdFxuICAgICAgLy8gSWYgYnJvd3NlciBkb2Vzbid0IHN1cHBvcnQgaW50ZXJzZWN0aW9uIG9ic2VydmVyLCBsb2FkIHRoZSBpbWFnZXMgaW1tZWRpYXRlbHlcbiAgICAgIGlmICghKCdJbnRlcnNlY3Rpb25PYnNlcnZlcicgaW4gd2luZG93KSkge1xuICAgICAgICB0aGlzLmxvYWRJbWFnZXNJbW1lZGlhdGVseSh0aGlzLmltYWdlc0xpc3QpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gSXQgaXMgc3VwcG9ydGVkLCBsb2FkIHRoZSBpbWFnZXNcbiAgICAgICAgdGhpcy5vYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcih0aGlzLm9uSW50ZXJzZWN0aW9uLCB0aGlzLm9ic2VydmVyQ29uZmlnKTtcblxuICAgICAgICAvLyBmb3JlYWNoKCkgaXMgbm90IHN1cHBvcnRlZCBpbiBJRVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuaW1hZ2VDb3VudDsgaSsrKSB7XG4gICAgICAgICAgbGV0IGltYWdlID0gdGhpcy5pbWFnZXNMaXN0W2ldO1xuICAgICAgICAgIGlmIChpbWFnZS5jbGFzc0xpc3QuY29udGFpbnMoJ2RjZi1sYXp5LWxvYWRlZCcpKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0aGlzLm9ic2VydmVyLm9ic2VydmUoaW1hZ2UpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbnJldHVybiBMYXp5TG9hZDtcbn0pKTtcbiIsIjsoZnVuY3Rpb24ocm9vdCwgZmFjdG9yeSkge1xuICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgZGVmaW5lKFtdLCBmYWN0b3J5KTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcbiAgfSBlbHNlIHtcbiAgICByb290LmRjZk1vZGFsID0gZmFjdG9yeSgpO1xuICB9XG59KHRoaXMsIGZ1bmN0aW9uKCkge1xuY2xhc3MgTW9kYWwge1xuXG4gIC8qKlxuICAgKiBjbGFzcyBjb25zdHJ1Y3RvclxuICAgKiBAcGFyYW0ge21vZGFsc30gbW9kYWxzIG9mIHNlbGVjdGVkIG1vZGFsc1xuICAgKi9cbiAgY29uc3RydWN0b3IobW9kYWxzKSB7XG4vLyAgICAgdGhpcy50aGVib2R5ID0gYm9keTtcbiAgICB0aGlzLm1vZGFscyA9IG1vZGFscztcbiAgfVxuXG5cblxuICAvKipcbiAgICogUHJlcGVuZCBtb2RhbHMgdG8gYm9keSBzbyB0aGF0IGVsZW1lbnRzIG91dHNpZGUgb2YgbW9kYWwgY2FuIGJlIG1hZGUgaW5lcnRcbiAgICogQHBhcmFtIHtzdHJpbmd9IGVsOiB0aGUgZWxlbWVudCB0aGF0IHdlIGFyZSB0YXJnZXR0aW5nXG4gICAqL1xuICBwcmVwZW5kQm9keShlbCkge1xuICAgIGNvbnN0IGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5Jyk7XG4gICAgY29uc3QgZmlyc3RDaGlsZCA9IGJvZHkuZmlyc3RFbGVtZW50Q2hpbGQ7XG4gICAgYm9keS5pbnNlcnRCZWZvcmUoZWwsIGZpcnN0Q2hpbGQpO1xuICB9XG5cbiAgLy8gVHJhbnNpdGlvbiBtb2RhbCBvbiBjbG9zZVxuLy8gICBtb2RhbFRyYW5zaXRpb24oZXZlbnQsIG1vZGFsKSB7XG4vLyAgICAgY29uc3QgdGhpc01vZGFsID0gdGhpcztcbi8vXG4vLyAgICAgLy8gUmVtb3ZlIHRoZSBldmVudCBsaXN0ZW5lciBhZnRlciB0aGUgbW9kYWwgdHJhbnNpdGlvbiBoYXMgY29tcGxldGVkXG4vLyAgICAgdGhpc01vZGFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RyYW5zaXRpb25lbmQnLCBtb2RhbFRyYW5zaXRpb24pO1xuLy9cbi8vICAgICAvLyBBZGQgdGhlIGAuZGNmLWludmlzaWJsZWAgY2xhc3MgdG8gdGhpcyBtb2RhbCBhZnRlciB0aGUgdHJhbnNpdGlvblxuLy8gICAgIGlmICghdGhpc01vZGFsLmNsYXNzTGlzdC5jb250YWlucygnZGNmLWludmlzaWJsZScpKSB7XG4vLyAgICAgICB0aGlzTW9kYWwuY2xhc3NMaXN0LmFkZCgnZGNmLWludmlzaWJsZScpO1xuLy8gICAgIH1cbi8vICAgfVxuXG4gIC8vIE9wZW4gbW9kYWxcbiAgb3Blbk1vZGFsKG1vZGFsSWQsIG9wZW5CdG5JZCkge1xuXG4gICAgY29uc3QgYm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5tb2RhbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IG1vZGFsID0gdGhpcy5tb2RhbHNbaV07XG5cbiAgICAgIGlmIChtb2RhbC5nZXRBdHRyaWJ1dGUoJ2lkJykgIT09IG1vZGFsSWQpIHtcbiAgICAgICAgdGhpcy5jbG9zZU1vZGFsKG1vZGFsLmdldEF0dHJpYnV0ZSgnaWQnKSk7XG4gICAgICB9XG5cbiAgICB9XG5cbiAgICBjb25zdCB0aGlzTW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChtb2RhbElkKTtcbiAgICBsZXQgbW9kYWxPcGVuID0gdGhpc01vZGFsLmdldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nKSA9PT0gJ2ZhbHNlJyA/IHRydWUgOiBmYWxzZTtcblxuICAgIGlmIChvcGVuQnRuSWQpIHtcbiAgICAgIGN1cnJlbnRCdG4gPSBvcGVuQnRuSWQ7XG4gICAgfVxuXG4gICAgY3VycmVudE1vZGFsID0gbW9kYWxJZDtcblxuICAgIC8vIERvbid0IG9wZW4gbW9kYWwgaWYgaXQncyBhbHJlYWR5IG9wZW5cbiAgICBpZiAobW9kYWxPcGVuKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gU2V0IGVsZW1lbnRzIG91dHNpZGUgb2YgbW9kYWwgdG8gYmUgaW5lcnQgYW5kIGhpZGRlbiBmcm9tIHNjcmVlbiByZWFkZXJzXG4gICAgbm9uTW9kYWxzLmZvckVhY2goZnVuY3Rpb24oZWwsIGFycmF5KSB7XG4gICAgICBlbC5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJywndHJ1ZScpO1xuICAgICAgZWwuc2V0QXR0cmlidXRlKCdpbmVydCcsJycpO1xuICAgICAgLy8gVE9ETzogQ29uZmlndXJlIGluZXJ0IHBvbHlmaWxsXG4gICAgfSk7XG5cbi8vICAgXHRQcmV2ZW50IGJvZHkgZnJvbSBzY3JvbGxpbmdcbi8vICAgXHRkaXNhYmxlQm9keVNjcm9sbCh0aGlzTW9kYWwpO1xuXG4gICAgLy8gQWRkIGAuZGNmLW1vZGFsLWlzLW9wZW5gIGhlbHBlciBjbGFzcyB0byBib2R5XG4gICAgYm9keS5jbGFzc0xpc3QuYWRkKCdkY2YtbW9kYWwtaXMtb3BlbicpO1xuXG4gICAgLy8gU2V0IGF0dHJpYnV0ZSBmb3IgdGhpcyBtb2RhbFxuICAgIHRoaXNNb2RhbC5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJywgJ2ZhbHNlJyk7XG5cbiAgICAvLyBBZGQvcmVtb3ZlIGNsYXNzZXMgdG8gdGhpcyBtb2RhbFxuICAgIHRoaXNNb2RhbC5jbGFzc0xpc3QucmVtb3ZlKCdkY2Ytb3BhY2l0eS0wJywgJ2RjZi1wb2ludGVyLWV2ZW50cy1ub25lJywgJ2RjZi1pbnZpc2libGUnKTtcbiAgICB0aGlzTW9kYWwuY2xhc3NMaXN0LmFkZCgnZGNmLW9wYWNpdHktMTAwJywgJ2RjZi1wb2ludGVyLWV2ZW50cy1hdXRvJyk7XG5cbiAgICAvLyBTZW5kIGZvY3VzIHRvIG1vZGFsIGNvbnRlbnRcbiAgICB0aGlzTW9kYWwuZm9jdXMoKTtcblxuICAgIC8vIFRPRE86IFRyYXAgZm9jdXMgaW5zaWRlIHRoZSBtb2RhbCBjb250ZW50XG5cbiAgfVxuXG5cbiAgLy8gQ2xvc2UgbW9kYWxcbiAgY2xvc2VNb2RhbChtb2RhbElkKSB7XG5cbiAgICBjb25zdCBib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpO1xuICAgIGNvbnN0IHRoaXNNb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG1vZGFsSWQpO1xuXG4gICAgbGV0IG1vZGFsQ2xvc2VkID0gdGhpc01vZGFsLmdldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nKSA9PT0gJ3RydWUnID8gdHJ1ZSA6IGZhbHNlO1xuXG4gICAgY3VycmVudE1vZGFsID0gbnVsbDtcblxuICAgIC8vIERvbid0IGNsb3NlIG1vZGFsIGlmIGl0J3MgYWxyZWFkeSBjbG9zZWRcbiAgICBpZiAobW9kYWxDbG9zZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBSZW1vdmUgYC5kY2YtbW9kYWwtaXMtb3BlbmAgaGVscGVyIGNsYXNzIGZyb20gYm9keVxuICBcdGJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnZGNmLW1vZGFsLWlzLW9wZW4nKTtcblxuICAgIC8vIFJlc3RvcmUgdmlzaWJpbGl0eSBhbmRkIGZ1bmN0aW9uYWxpdHkgdG8gZWxlbWVudHMgb3V0c2lkZSBvZiBtb2RhbFxuICAgIG5vbk1vZGFscy5mb3JFYWNoKGZ1bmN0aW9uKGVsLCBhcnJheSkge1xuICAgICAgZWwuc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsJ2ZhbHNlJyk7XG4gICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoJ2luZXJ0Jyk7XG4gICAgfSk7XG5cbiAgICAvLyBTZXQgYXR0cmlidXRlIGZvciB0aGlzIG1vZGFsXG4gICAgdGhpc01vZGFsLnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAndHJ1ZScpO1xuXG4gICAgLy8gQWRkL3JlbW92ZSBjbGFzc2VzIHRvIHRoaXMgbW9kYWxcbiAgICB0aGlzTW9kYWwuY2xhc3NMaXN0LnJlbW92ZSgnZGNmLW9wYWNpdHktMTAwJywgJ2RjZi1wb2ludGVyLWV2ZW50cy1hdXRvJyk7XG4gICAgdGhpc01vZGFsLmNsYXNzTGlzdC5hZGQoJ2RjZi1vcGFjaXR5LTAnLCAnZGNmLXBvaW50ZXItZXZlbnRzLW5vbmUnKTtcblxuICAgIC8vIEFkZCBldmVudCBsaXN0ZW5lciBmb3IgdGhlIGVuZCBvZiB0aGUgbW9kYWwgdHJhbnNpdGlvblxuLy8gICAgIHRoaXNNb2RhbC5hZGRFdmVudExpc3RlbmVyKCd0cmFuc2l0aW9uZW5kJywgbW9kYWxUcmFuc2l0aW9uKTtcblxuICAgIC8vIFNlbmQgZm9jdXMgYmFjayB0byBidXR0b24gdGhhdCBvcGVuZWQgbW9kYWxcbiAgICBpZiAoY3VycmVudEJ0bikge1xuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY3VycmVudEJ0bikuZm9jdXMoKTtcbiAgICB9XG5cbiAgICAgIC8vIFRPRE86IEFsbG93IGJvZHkgdG8gc2Nyb2xsXG4gIH1cblxuXG4gIGJ0bk9wZW5MaXN0ZW4oYnRuT3Blbk1vZGFsLCBtb2RhbElkLCBidG5JZCkge1xuXG4gICAgLy8gVE9ETzogYWNjb3VudCBmb3IgbXVsdGlwbGUgYnV0dG9ucyBhYmxlIHRvIG9wZW4gYSBzaW5nbGUgbW9kYWwgKGUuZy4sIHNlYXJjaClcbiAgICAvLyBMaXN0ZW4gZm9yIHdoZW4gJ29wZW4gbW9kYWwnIGJ1dHRvbiBpcyBwcmVzc2VkXG4gICAgYnRuT3Blbk1vZGFsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgLy8gT3BlbiBtb2RhbCB3aGVuIGJ1dHRvbiBpcyBwcmVzc2VkXG4gICAgICB0aGlzLm9wZW5Nb2RhbChtb2RhbElkLCBidG5JZCk7XG4gICAgfSwgZmFsc2UpO1xuXG4gIH1cblxuICBidG5DbG9zZUxpc3RlbihidG5DbG9zZU1vZGFsLCBtb2RhbCkge1xuXG4gICAgLy8gTGlzdGVuIGZvciB3aGVuICdjbG9zZSBtb2RhbCcgYnV0dG9uIGlzIHByZXNzZWRcbiAgICBidG5DbG9zZU1vZGFsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgLy8gT3BlbiBtb2RhbCB3aGVuIGJ1dHRvbiBpcyBwcmVzc2VkXG4gICAgICB0aGlzLmNsb3NlTW9kYWwobW9kYWwuZ2V0QXR0cmlidXRlKCdpZCcpKTtcbiAgICB9LCBmYWxzZSk7XG5cbiAgfVxuXG4gIG92ZXJsYXlMaXN0ZW4obW9kYWwsIG1vZGFsQ29udGVudCkge1xuXG4gICAgLy8gTGlzdGVuIGZvciBjbGlja3Mgb24gdGhlIG9wZW4gbW9kYWxcbiAgICBtb2RhbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xuXG4gICAgICAvLyBJZiB0aGUgY2xpY2sgaXMgaW4gbW9kYWwgY29udGVudCwgbGVhdmUgdGhlIG1vZGFsIG9wZW5cbiAgICAgIGlmIChtb2RhbENvbnRlbnQuY29udGFpbnMoZXZlbnQudGFyZ2V0KSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIElmIHRoZSBjbGljayBpcyBvdXRzaWRlIHRoZSBtb2RhbCBjb250ZW50IChvbiB0aGUgbW9kYWwgb3ZlcmxheSksIGNsb3NlIHRoZSBtb2RhbFxuICAgICAgdGhpcy5jbG9zZU1vZGFsKG1vZGFsLmdldEF0dHJpYnV0ZSgnaWQnKSk7XG4gICAgfSk7XG5cbiAgfVxuXG4gIC8vIExpc3RlbiBmb3Igd2hlbiAnZXNjJyBrZXkgaXMgcHJlc3NlZFxuLy8gICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4vL1xuLy8gICAgIC8vIENsb3NlIHRoZSBjdXJyZW50bHkgb3BlbiBtb2RhbCB3aGVuICdlc2MnIGtleSBpcyBwcmVzc2VkXG4vLyAgICAgaWYgKGV2ZW50LndoaWNoID09PSAyNyAmJiBjdXJyZW50TW9kYWwpIHtcbi8vICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4vLyAgICAgICBjbG9zZU1vZGFsKGN1cnJlbnRNb2RhbCk7XG4vLyAgICAgfVxuLy8gICB9LCBmYWxzZSk7XG5cblxuICBpbml0aWFsaXplKCkge1xuXG4gICAgaWYoIXRoaXMubW9kYWxzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gRGVmaW5lIGNvbnN0YW50cyB1c2VkIGluIG1vZGFsIGNvbXBvbmVudFxuICAgIGNvbnN0IGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5Jyk7XG4gICAgY29uc3QgYnRuc09wZW5Nb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5kY2YtYnRuLW9wZW4tbW9kYWwnKTtcbiAgICBjb25zdCBidG5zQ2xvc2VNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5kY2YtYnRuLWNsb3NlLW1vZGFsJyk7XG4gICAgY29uc3QgbW9kYWxzQ29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5kY2YtbW9kYWwtY29udGVudCcpO1xuICAgIGNvbnN0IHNraXBOYXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGNmLXNraXAtbmF2Jyk7XG4gICAgY29uc3QgaGVhZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RjZi1oZWFkZXInKTtcbiAgICBjb25zdCBtYWluID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RjZi1tYWluJyk7XG4gICAgY29uc3QgZm9vdGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RjZi1mb290ZXInKTtcbiAgICBjb25zdCBub25Nb2RhbHMgPSBbc2tpcE5hdiwgaGVhZGVyLCBtYWluLCBmb290ZXJdO1xuXG4gICAgbGV0IGN1cnJlbnRCdG4gPSBudWxsO1xuICAgIGxldCBjdXJyZW50TW9kYWwgPSBudWxsO1xuXG4gICAgLy8gTG9vcCB0aHJvdWdoIGFsbCBidXR0b25zIHRoYXQgb3BlbiBtb2RhbHNcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJ0bnNPcGVuTW9kYWwubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGJ0bk9wZW5Nb2RhbCA9IGJ0bnNPcGVuTW9kYWxbaV07XG4gICAgICBjb25zdCBtb2RhbElkID0gYnRuT3Blbk1vZGFsLmdldEF0dHJpYnV0ZSgnZGF0YS1vcGVucy1tb2RhbCcpO1xuICAgICAgY29uc3QgYnRuSWQgPSAnZGNmLWJ0bi1vcGVucy0nICsgbW9kYWxJZDtcbiAgICAgIGJ0bk9wZW5Nb2RhbC5zZXRBdHRyaWJ1dGUoJ2lkJywgYnRuSWQpO1xuXG4gICAgICAvLyBCdXR0b25zIGFyZSBkaXNhYmxlZCBieSBkZWZhdWx0IHVudGlsIEphdmFTY3JpcHQgaGFzIGxvYWRlZC5cbiAgICAgIC8vIFJlbW92ZSB0aGUgJ2Rpc2FibGVkJyBhdHRyaWJ1dGUgdG8gbWFrZSB0aGVtIGZ1bmN0aW9uYWwuXG4gICAgICBidG5PcGVuTW9kYWwucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xuXG4gICAgICB0aGlzLmJ0bk9wZW5MaXN0ZW4oYnRuT3Blbk1vZGFsLCBtb2RhbElkLCBidG5JZCk7XG4gICAgfVxuXG5cbiAgICAvLyBMb29wIHRocm91Z2ggYWxsIG1vZGFsc1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5tb2RhbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IG1vZGFsID0gdGhpcy5tb2RhbHNbaV07XG4gICAgICBjb25zdCBtb2RhbENvbnRlbnQgPSBtb2RhbHNDb250ZW50W2ldO1xuICAgICAgY29uc3QgYnRuQ2xvc2VNb2RhbCA9IGJ0bnNDbG9zZU1vZGFsW2ldO1xuICAgICAgY29uc3QgbW9kYWxJZCA9IG1vZGFsLmlkO1xuICAgICAgY29uc3QgbW9kYWxIZWFkaW5nSWQgPSBtb2RhbElkICsgJy1oZWFkaW5nJztcblxuICAgICAgLy8gR2V0IGFsbCBoZWFkaW5ncyBpbiBlYWNoIG1vZGFsXG4gICAgICBjb25zdCBtb2RhbEhlYWRpbmdzID0gbW9kYWxDb250ZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2gxLCBoMiwgaDMsIGg0LCBoNSwgaDYnKTtcblxuICAgICAgLy8gU2V0IElEIG9uIHRoZSBmaXJzdCBoZWFkaW5nIG9mIGVhY2ggbW9kYWxcbiAgICAgIG1vZGFsSGVhZGluZ3NbMF0uaWQgPSBtb2RhbEhlYWRpbmdJZDtcblxuICAgICAgLy8gUHJlcGVuZCBtb2RhbHMgdG8gYm9keSBzbyB0aGF0IGVsZW1lbnRzIG91dHNpZGUgb2YgbW9kYWwgY2FuIGJlIG1hZGUgaW5lcnQgd2hlbiBtb2RhbCBpcyBvcGVuXG4gICAgICB0aGlzLnByZXBlbmRCb2R5KG1vZGFsKTtcblxuICAgICAgLy8gTW9kYWxzIGFyZSBoaWRkZW4gYnkgZGVmYXVsdCB1bnRpbCBKYXZhU2NyaXB0IGhhcyBsb2FkZWQuXG4gICAgICAvLyBSZW1vdmUgYGhpZGRlbmAgYXR0cmlidXRlLCB0aGVuIGxhdGVyIHJlcGxhY2Ugd2l0aCBgLmRjZi1pbnZpc2libGVgIHRvIGFsbG93IGZvciBtb2RhbCB0cmFuc2l0aW9ucy5cbiAgICAgIG1vZGFsLnJlbW92ZUF0dHJpYnV0ZSgnaGlkZGVuJyk7XG5cbiAgICAgIC8vIFNldCBhdHRyaWJ1dGVzIGZvciBlYWNoIG1vZGFsXG4gICAgICBtb2RhbC5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWxsZWRieScsIG1vZGFsSGVhZGluZ0lkKTtcbiAgICAgIG1vZGFsLnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAndHJ1ZScpO1xuICAgICAgbW9kYWwuc2V0QXR0cmlidXRlKCdyb2xlJywgJ2RpYWxvZycpO1xuICAgICAgbW9kYWwuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICctMScpO1xuXG4gICAgICAvLyBBZGQgY2xhc3NlcyB0byBlYWNoIG1vZGFsXG4gICAgICBtb2RhbC5jbGFzc0xpc3QuYWRkKCdkY2YtZml4ZWQnLCAnZGNmLXBpbi10b3AnLCAnZGNmLXBpbi1sZWZ0JywgJ2RjZi1oLTEwMCUnLCAnZGNmLXctMTAwJScsICdkY2YtZC1mbGV4JywgJ2RjZi1haS1jZW50ZXInLCAnZGNmLWpjLWNlbnRlcicsICdkY2YtaW52aXNpYmxlJyk7XG5cbiAgICAgIC8vIFNldCBhdHRyaWJ1dGUgZm9yIG1vZGFsIGNvbnRlbnRcbiAgICAgIG1vZGFsQ29udGVudC5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCAnZG9jdW1lbnQnKTtcblxuICAgICAgLy8gQWRkIGNsYXNzZXMgdG8gbW9kYWwgY29udGVudFxuICAgICAgLy8gVE9ETzogYWRkIHRoZXNlIGNsYXNzZXMgb25seSBpZiBubyBjdXN0b20gY2xhc3NlcyBhcmUgcHJlc2VudCBpbiB0aGUgbWFya3VwXG4gICAgICBtb2RhbENvbnRlbnQuY2xhc3NMaXN0LmFkZCgnZGNmLXJlbGF0aXZlJywgJ2RjZi13cmFwcGVyJywgJ2RjZi1wdC03JywgJ2RjZi1wYi03Jyk7XG5cbiAgICAgIC8vIEFkZCBjbGFzc2VzIGFuZCBhdHRyaWJ1dGVzIHRvIGVhY2ggJ2Nsb3NlJyBidXR0b25cbiAgICAgIC8vIFRPRE86IGFkZCB0aGVzZSBjbGFzc2VzIG9ubHkgaWYgbm8gY3VzdG9tIGNsYXNzZXMgYXJlIHByZXNlbnQgaW4gdGhlIG1hcmt1cFxuICAgICAgYnRuQ2xvc2VNb2RhbC5jbGFzc0xpc3QuYWRkKCdkY2YtYWJzb2x1dGUnLCAnZGNmLXBpbi10b3AnLCAnZGNmLXBpbi1yaWdodCcsICdkY2Ytei0xJyk7XG5cbiAgICAgIC8vIFNldCBhdHRyaWJ1dGVzIGZvciBlYWNoICdjbG9zZScgYnV0dG9uXG4gICAgICBidG5DbG9zZU1vZGFsLnNldEF0dHJpYnV0ZSgndHlwZScsICdidXR0b24nKTtcbiAgICAgIGJ0bkNsb3NlTW9kYWwuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgJ0Nsb3NlJyk7XG5cbiAgICAgIHRoaXMub3ZlcmxheUxpc3Rlbihtb2RhbCwgbW9kYWxDb250ZW50KTtcblxuICAgICAgdGhpcy5idG5DbG9zZUxpc3RlbihidG5DbG9zZU1vZGFsLCBtb2RhbCk7XG5cbiAgICB9XG5cbiAgfVxuXG59XG5cbnJldHVybiBNb2RhbDtcbn0pKTtcbiIsImxldCBMYXp5TG9hZCA9IHJlcXVpcmUoJ2RjZi1sYXp5TG9hZCcpO1xubGV0IE1vZGFsID0gcmVxdWlyZSgnZGNmLW1vZGFsJyk7XG4vLyBsZXQgTm90aWNlID0gcmVxdWlyZSgnZGNmLW5vdGljZScpO1xuXG4vLyBsZXQgZmxhdHBpY2tyID0gcmVxdWlyZSgnZmxhdHBpY2tyL2ZsYXRwaWNrcicpO1xuLy8gcmVxdWlyZShcImZsYXRwaWNrci9mbGF0cGlja3IuY3NzXCIpO1xuXG5cbi8vIGNvbnN0IG5vdGljZU9wdGlvbnMgPSB7XG4vLyBcdHdpZGdldDogJ25vdGljZScsXG4vLyBcdCdub3RpY2UtdHlwZSc6ICdhbGVydCcsXG4vLyBcdGFuaW1hdGlvbjogJ3RydWUnLFxuLy8gXHRsb2NhdGlvbjogJ2ZpeGVkQm90dG9tJyxcbi8vIFx0Y29sbGFwc2libGU6ICd0cnVlJyxcbi8vIFx0aWQ6ICdkeW5hbWljTm90aWNlMSdcbi8vIH07XG4vL1xuLy8gTm90aWNlLmNyZWF0ZSgnU3BhZ2hldHRpIE1vbnN0ZXIgTGl2ZXMnLCAnWW91IGtub3cgbm8gc3BhZ2hldHRpJywgbm90aWNlT3B0aW9ucyk7XG5cblxuLy8gbGV0IGRhdGVwaWNrZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS13aWRnZXQqPVwiZmxhdHBpY2tyXCJdJyk7XG4vLyBmbGF0cGlja3IoZGF0ZXBpY2tlciwge1xuLy8gXHRlbmFibGVUaW1lOiB0cnVlLFxuLy8gXHRkYXRlRm9ybWF0OiBcIlktbS1kIGg6aUtcIixcbi8vIH0pO1xuXG5jb25zdCBpbWFnZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbbG9hZGluZz1sYXp5XSwgLmRjZi1sYXp5LWxvYWQnKTtcbmNvbnN0IG9ic2VydmVyQ29uZmlnID0ge1xuXHQvLyBleHRlbmQgaW50ZXJzZWN0aW9uIHJvb3QgbWFyZ2luIGJ5IDUwcHggdG8gc3RhcnQgaW50ZXJzZWN0aW9uIGVhcmxpZXIgYnkgNTBweFxuXHRyb290TWFyZ2luOiAnMHB4IDBweCA1MHB4IDBweCcsXG5cdHRocmVzaG9sZDogWzAsIDAuNDBdXG59O1xuY29uc3QgZW50ZXJDbGFzc05hbWVzID0gWydkY2YtZmFkZS1pbiddO1xuY29uc3QgZXhhbXBsZUxhenlMb2FkID0gbmV3IExhenlMb2FkKGltYWdlcywgb2JzZXJ2ZXJDb25maWcsIGVudGVyQ2xhc3NOYW1lcyk7XG5leGFtcGxlTGF6eUxvYWQuaW5pdGlhbGl6ZSgpO1xuXG5jb25zdCBtb2RhbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZGNmLW1vZGFsJyk7XG5jb25zdCBleGFtcGxlTW9kYWwgPSBuZXcgTW9kYWwobW9kYWxzKTtcbmV4YW1wbGVNb2RhbC5pbml0aWFsaXplKCk7XG4iXX0="}