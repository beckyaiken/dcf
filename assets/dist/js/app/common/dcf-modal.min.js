/**
 * @project        dcf
 * @author         Digital Campus Nebraska
 * @website        http://digitalcampus.us/
 * @copyright      Copyright (c) 2019, BSD-3-Clause
 *
 */
"use strict";var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var d=t[n];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(e,d.key,d)}}return function(t,n,d){return n&&e(t.prototype,n),d&&e(t,d),t}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(e,t){"function"==typeof define&&define.amd?define(["./dcf-uuidGen"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=t(require("./dcf-uuidGen")):e.dcfModal=t(e.dcfHelperUuidv4)}(void 0,function(e){var t=require("body-scroll-lock"),n=t.disableBodyScroll,d=t.enableBodyScroll;return function(){function t(e){_classCallCheck(this,t),this.modals=e}return _createClass(t,[{key:"prependBody",value:function(e){var t=document.querySelector("body"),n=t.firstElementChild;t.insertBefore(e,n)}},{key:"openModal",value:function(e,t){for(var d=document.querySelector("body"),i=[document.getElementById("dcf-skip-nav"),document.getElementById("dcf-header"),document.getElementById("dcf-main"),document.getElementById("dcf-footer")],o=0;o<this.modals.length;o++){var c=this.modals[o];c.getAttribute("id")!==e&&this.closeModal(c.getAttribute("id"))}var a=document.getElementById(e),r="false"===a.getAttribute("aria-hidden");if(t&&(this.currentBtn=t),this.currentModal=e,!r){i.forEach(function(e,t){e.setAttribute("aria-hidden","true"),e.setAttribute("inert","")}),n(a),d.classList.add("dcf-modal-is-open"),a.setAttribute("aria-hidden","false"),a.classList.remove("dcf-opacity-0","dcf-pointer-events-none","dcf-invisible"),a.classList.add("dcf-opacity-100","dcf-pointer-events-auto");var s=a.querySelectorAll('button:not([hidden]):not([disabled]), [href]:not([hidden]), input:not([hidden]):not([type="hidden"]):not([disabled]), select:not([hidden]):not([disabled]), textarea:not([hidden]):not([disabled]), [tabindex="0"]:not([hidden]):not([disabled]), summary:not([hidden]), [contenteditable]:not([hidden]), audio[controls]:not([hidden]), video[controls]:not([hidden])'),l=s[0],u=s[s.length-1];l.focus(),a.addEventListener("keydown",function(e){("Tab"===e.key||9===e.keyCode)&&("Tab"!==e.key&&9!==e.keyCode||(e.shiftKey?document.activeElement===l&&(e.preventDefault(),u.focus()):document.activeElement===u&&(e.preventDefault(),l.focus())))})}}},{key:"closeModal",value:function(e){var t=document.querySelector("body"),n=[document.getElementById("dcf-skip-nav"),document.getElementById("dcf-header"),document.getElementById("dcf-main"),document.getElementById("dcf-footer")],i=document.getElementById(e),o="true"===i.getAttribute("aria-hidden");this.currentModal=null,o||(t.classList.remove("dcf-modal-is-open"),n.forEach(function(e,t){e.setAttribute("aria-hidden","false"),e.removeAttribute("inert")}),i.setAttribute("aria-hidden","true"),i.classList.remove("dcf-opacity-100","dcf-pointer-events-auto"),i.classList.add("dcf-opacity-0","dcf-pointer-events-none"),i.addEventListener("transitionend",function e(){i.removeEventListener("transitionend",e),i.classList.contains("dcf-invisible")||i.classList.add("dcf-invisible")}),this.currentBtn&&document.getElementById(this.currentBtn).focus(),d(i))}},{key:"btnOpenListen",value:function(e,t,n){var d=this;e.addEventListener("click",function(){d.openModal(t,n)},!1)}},{key:"btnCloseListen",value:function(e,t){var n=this;e.addEventListener("click",function(){n.closeModal(t.getAttribute("id"))},!1)}},{key:"overlayListen",value:function(e,t){var n=this;e.addEventListener("click",function(d){t.contains(d.target)||n.closeModal(e.getAttribute("id"))})}},{key:"escListen",value:function(){var e=this;document.addEventListener("keydown",function(t){27===t.which&&e.currentModal&&(t.preventDefault(),e.closeModal(e.currentModal))})}},{key:"initialize",value:function(){if(this.modals){document.querySelector("body");for(var t=document.querySelectorAll(".dcf-btn-open-modal"),n=document.querySelectorAll(".dcf-btn-close-modal"),d=document.querySelectorAll(".dcf-modal-content"),i=0;i<t.length;i++){var o=t[i],c=o.getAttribute("data-opens-modal"),a=e();o.setAttribute("id",a),o.removeAttribute("disabled"),this.btnOpenListen(o,c,a)}for(var r=0;r<this.modals.length;r++){var s=this.modals[r],l=d[r],u=n[r],f=s.id+"-heading";l.querySelectorAll("h1, h2, h3, h4, h5, h6")[0].id=f,this.prependBody(s),s.removeAttribute("hidden"),s.setAttribute("aria-labelledby",f),s.setAttribute("aria-hidden","true"),s.setAttribute("role","dialog"),s.setAttribute("tabindex","-1"),1===s.classList.length&&s.classList.contains("dcf-modal")&&s.classList.add("dcf-bg-overlay-dark"),s.classList.add("dcf-fixed","dcf-pin-top","dcf-pin-left","dcf-h-100%","dcf-w-100%","dcf-d-flex","dcf-ai-center","dcf-jc-center","dcf-opacity-0","dcf-pointer-events-none","dcf-invisible"),l.setAttribute("role","document"),1===l.classList.length&&l.classList.contains("dcf-modal-content")&&l.classList.add("dcf-bg-white","dcf-relative","dcf-wrapper","dcf-pt-8","dcf-pb-7","dcf-h-auto","dcf-overflow-y-auto"),1===u.classList.length&&u.classList.contains("dcf-btn-close-modal")&&u.classList.add("dcf-btn","dcf-btn-tertiary","dcf-absolute","dcf-pin-top","dcf-pin-right","dcf-z-1"),u.setAttribute("type","button"),u.setAttribute("aria-label","Close"),this.escListen(),this.overlayListen(s,l),this.btnCloseListen(u,s)}}}}]),t}()});
//# sourceMappingURL=dcf-modal.min.js.map
